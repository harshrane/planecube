<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>A-Frame - Move Camera Rig on Plane with Left Thumbstick</title>
  <script src="https://aframe.io/releases/1.4.1/aframe.min.js"></script>
  <script src="../../dist/aframe-thumb-controls-component.min.js"></script>
  <script src="https://unpkg.com/aframe-environment-component@1.3.2/dist/aframe-environment-component.min.js"></script>
</head>
<body>
  <script>
    AFRAME.registerComponent('camera-rig-movement', {
      init: function () {
        // Reference the camera entity
        const camera = this.el.scene.querySelector('a-camera');

        // Listen for thumbstick events on the left controller
        const leftController = this.el.scene.querySelector('[oculus-touch-controls][hand: left]');
        if (!leftController) {
          console.error('Left controller not found');
          return;
        }

        leftController.addEventListener('thumbrightstart', () => { this.moveCamera('x', 0.1) });
        leftController.addEventListener('thumbrightend', () => { this.moveCamera('x', 0) });
        leftController.addEventListener('thumbleftstart', () => { this.moveCamera('x', -0.1) });
        leftController.addEventListener('thumbleftend', () => { this.moveCamera('x', 0) });
        leftController.addEventListener('thumbupstart', () => { this.moveCamera('z', 0.1) }); // Move forward on z-axis
        leftController.addEventListener('thumbupend', () => { this.moveCamera('z', 0) });
        leftController.addEventListener('thumbdownstart', () => { this.moveCamera('z', -0.1) }); // Move backward on z-axis
        leftController.addEventListener('thumbdownend', () => { this.moveCamera('z', 0) });
      },

      moveCamera: function (axis, distance) {
        const position = camera.getAttribute('position');
        position[axis] += distance;
        camera.setAttribute('position', position);
      }
    });
  </script>

  <a-scene environment="preset: forest">
    <a-entity oculus-touch-controls="hand: right"
              vive-controls="hand: right"
              windows-motion-controls="hand: right">
    </a-entity>
    <a-entity oculus-touch-controls="hand: left"
              vive-controls="hand: left"
              windows-motion-controls="hand: left"
              camera-rig-movement
              thumb-controls>
    </a-entity>

    <a-camera></a-camera>
    <a-box position="0 1 -3"></a-box>
  </a-scene>
</body>
</html>
